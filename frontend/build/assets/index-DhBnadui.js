import{r as s,j as e,B as S,R as v,a as g,c as L}from"./vendor-react-DdNGmFZ1.js";import{w as j,l as I,a as E,p as P,W as R,C as f}from"./vendor-C4nZZbCy.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const A=()=>(s.useEffect(()=>{const a=document.createElement("script");a.src="/igai.min.js",a.async=!0,document.body.appendChild(a)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{id:"c",action:"/lg",children:[e.jsx("button",{name:"email",children:"Login Email"}),e.jsx("br",{}),e.jsx("input",{id:"e",placeholder:"Enter your email"}),e.jsx("br",{}),e.jsx("button",{name:"metamask",children:"Login with Metamask"}),e.jsx("br",{}),e.jsx("button",{name:"google",children:"Login with Google"}),e.jsx("br",{}),e.jsx("button",{name:"github",children:"Login with Github"}),e.jsx("br",{}),e.jsx("button",{name:"bitbucket",children:"Login with BitBucket"}),e.jsx("br",{}),e.jsx("button",{name:"gitlab",children:"Login with GitLab"}),e.jsx("br",{}),e.jsx("button",{name:"discord",children:"Login with Discord"}),e.jsx("br",{}),e.jsx("button",{name:"twitch",children:"Login with Twitch"}),e.jsx("br",{}),e.jsx("button",{name:"microsoft",children:"Login with Microsoft"}),e.jsx("br",{}),e.jsx("button",{name:"telegram",children:"Login with Telegram"}),e.jsx("br",{}),e.jsx("button",{name:"twitter",children:"Login with Twitter"}),e.jsx("br",{})]}),e.jsx("a",{id:"d",children:"Logout"}),e.jsx("br",{}),e.jsxs("div",{id:"a",children:[e.jsxs("form",{action:"/scan",target:"_blank",children:[e.jsx("select",{id:"g",name:"g"}),e.jsx("select",{id:"y",name:"y"}),e.jsx("button",{children:"Scan health"})]}),e.jsxs("form",{action:"/voice",target:"_blank",children:[e.jsx("select",{id:"v",name:"v"}),e.jsx("button",{children:"Scan voice"})]}),e.jsxs("form",{action:"/print",target:"_blank",children:[e.jsx("input",{name:"e",placeholder:"Email",required:!0}),e.jsx("input",{name:"c",placeholder:"Phone code",required:!0}),e.jsx("input",{name:"n",placeholder:"Phone number",required:!0}),e.jsx("button",{children:"Scan digital foot print"})]}),"Your referral link: ",e.jsx("a",{id:"k"}),e.jsx("form",{action:"/wallet",target:"_blank",children:e.jsx("button",{children:"Open Wallet"})}),e.jsx("button",{id:"s",children:"Set Secret Key"})]})]}));function p(){const a=localStorage.getItem("a"),n=localStorage.getItem("u");if(n){const o=new URL(n);o.search="",location.href=`${o.toString()}?a=${a}`}}const b="pk_live_27266000CD95B626",w="0x7d1fe42532cEE53A23cc266c06Ac55e65b0797a9",x="0x0C1A6816C7C59C2876624d0AdBd53Eb9bb6291bc",O=()=>(s.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),n=a.get("t"),o=a.get("email");if(n==="metamask"&&window.ethereum){const r=await window.ethereum.request({method:"eth_requestAccounts"});localStorage.setItem("a",r[0]),p();return}const i=new j(b,{extensions:[new I]});if(o){await i.auth.loginWithMagicLink({email:o}),localStorage.setItem("a",await(await fetch("/les",{headers:{m:await i.user.getIdToken()}})).text()),p();return}if(n==="telegram"){await i.oauth2.loginWithPopup({provider:"telegram"}),localStorage.setItem("a",(await i.user.getInfo()).publicAddress??""),p();return}const t=n||localStorage.getItem("p");t&&localStorage.setItem("p",t);try{await i.oauth2.getRedirectResult({})}catch{}await i.user.isLoggedIn()?(localStorage.setItem("a",(await i.user.getInfo()).publicAddress??""),localStorage.removeItem("p"),p()):t&&i.oauth2.loginWithRedirect({provider:t,redirectURI:`${window.location.origin}/lg`})})()},[]),e.jsx(e.Fragment,{children:"Loading..."})),C=()=>{const[a,n]=s.useState(null);return s.useEffect(()=>{(async()=>{const i=new URLSearchParams(window.location.search),t=i.get("e"),r=i.get("c"),c=i.get("n"),l=(await E.get(`/foot?e=${t}&c=${r}&n=${c}`,{headers:{auth:localStorage.getItem("s")||""}})).data;n(l),l.customer&&await fetch("/store",{method:"POST",headers:{addr:localStorage.getItem("a")||"",type:"1","Content-Type":"application/json"},body:JSON.stringify(l)})})()},[]),e.jsx("pre",{style:{maxHeight:"100%",overflow:"auto"},children:a?JSON.stringify(a,null,2):"Loading..."})},k=()=>{const[a,n]=s.useState(null),[o,i]=s.useState(""),t=s.useRef(null),[r,c]=s.useState(!1);return s.useEffect(()=>{n(localStorage.getItem("a")),c(/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent))},[]),s.useEffect(()=>{if(!a)return;async function l(){const u=new URLSearchParams(window.location.search);i(await(await fetch(`/iframe?g=${u.get("g")}&y=${u.get("y")}`,{headers:{auth:localStorage.getItem("s")||""}})).text())}l();function d(u){if(!a||!t.current)return;const m=u.data;m.action==="onAnalysisStart"&&t.current.start(),m.analysisData&&m.analysisData.vitalSigns&&(fetch("/store",{method:"POST",headers:{addr:a,type:"1","Content-Type":"application/json"},body:JSON.stringify(m.analysisData)}),t.current.stop())}return window.addEventListener("message",d),()=>{window.removeEventListener("message",d)}},[a]),e.jsx("iframe",{allow:"camera;microphone;fullscreen;display-capture",src:o})},T=()=>(s.useEffect(()=>{let a,n,o;async function i(){if(o=P(new URLSearchParams(window.location.search).get("amt")||"100",18),!window.ethereum)return;const l="0x42A";try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:l}]})}catch{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:l,chainName:"L1X",nativeCurrency:{name:"L1X",symbol:"L1X",decimals:18},rpcUrls:["https://v2-mainnet-rpc.l1x.foundation/"]}]}),window.location.reload()}a=await n.getSigner().getAddress(),n=new R(window.ethereum),await t()||await r(),await c()}async function t(){return(await new f(x,["function allowance(address, address)view returns(uint256)"],n).allowance(a,w)).gte(o)}async function r(){await(await new f(x,["function approve(address, uint256)"],n.getSigner()).approve(w,o)).wait()}async function c(){await new f(w,["function topup(uint256)"],n.getSigner()).topup(o)}i()},[]),e.jsx(e.Fragment,{children:"Paying..."})),U=()=>{const[a,n]=s.useState(45),[o,i]=s.useState(""),[t,r]=s.useState(!1);return s.useEffect(()=>{const c=setInterval(()=>{n(d=>d<=1?(clearInterval(c),r(!0),0):d-1)},1e3);return(async()=>{const d=await navigator.mediaDevices.getUserMedia({audio:!0}),u=new MediaRecorder(d),m=[];u.ondataavailable=h=>{h.data.size>0&&m.push(h.data)},u.onstop=async()=>{const h=new FormData;h.append("audio",new Blob(m,{type:"audio/webm"}),"v"),h.append("v",new URLSearchParams(location.search).get("v")||""),h.append("a",localStorage.getItem("a")||"");const y=await(await fetch("/v",{method:"POST",body:h,headers:{auth:localStorage.getItem("s")||""}})).text();i(y)},u.start(),setTimeout(()=>{u.stop(),d.getTracks().forEach(h=>h.stop())},45e3)})(),()=>clearInterval(c)},[]),e.jsx(e.Fragment,{children:t?o?e.jsx("pre",{children:JSON.stringify(JSON.parse(o),null,2)}):e.jsx("p",{children:"Processing..."}):e.jsxs("p",{children:["Start talking now, ",a,"s left"]})})},M=()=>(s.useEffect(()=>{(async()=>{const a=new j(b);await a.user.isLoggedIn()?await a.wallet.showUI():window.location.href="/"})()},[]),e.jsx(e.Fragment,{}));function q(){return e.jsx(S,{children:e.jsxs(v,{children:[e.jsx(g,{path:"/",element:e.jsx(A,{})}),e.jsx(g,{path:"/lg",element:e.jsx(O,{})}),e.jsx(g,{path:"/scan",element:e.jsx(k,{})}),e.jsx(g,{path:"/print",element:e.jsx(C,{})}),e.jsx(g,{path:"/topup",element:e.jsx(T,{})}),e.jsx(g,{path:"/voice",element:e.jsx(U,{})}),e.jsx(g,{path:"/wallet",element:e.jsx(M,{})})]})})}L.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(q,{})}));
