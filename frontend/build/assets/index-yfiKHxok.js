import{r as s,j as e,B as v,R as L,a as g,c as E}from"./vendor-react-OCIIikcD.js";import{w as P,l as I,a as R,p as A,W as C,C as j}from"./vendor-C4nZZbCy.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();const O=()=>(s.useEffect(()=>{const n=document.createElement("script");n.src="/igai.min.js",n.async=!0,document.body.appendChild(n)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{id:"c",action:"/lg",children:[e.jsx("button",{name:"email",children:"Login Email"}),e.jsx("br",{}),e.jsx("input",{id:"e",placeholder:"Enter your email"}),e.jsx("br",{}),e.jsx("button",{name:"metamask",children:"Login with Metamask"}),e.jsx("br",{}),e.jsx("button",{name:"google",children:"Login with Google"}),e.jsx("br",{}),e.jsx("button",{name:"github",children:"Login with Github"}),e.jsx("br",{}),e.jsx("button",{name:"bitbucket",children:"Login with BitBucket"}),e.jsx("br",{}),e.jsx("button",{name:"gitlab",children:"Login with GitLab"}),e.jsx("br",{}),e.jsx("button",{name:"discord",children:"Login with Discord"}),e.jsx("br",{}),e.jsx("button",{name:"twitch",children:"Login with Twitch"}),e.jsx("br",{}),e.jsx("button",{name:"microsoft",children:"Login with Microsoft"}),e.jsx("br",{}),e.jsx("button",{name:"telegram",children:"Login with Telegram"}),e.jsx("br",{}),e.jsx("button",{name:"twitter",children:"Login with Twitter"}),e.jsx("br",{})]}),e.jsx("a",{id:"d",children:"Logout"}),e.jsx("br",{}),e.jsxs("div",{id:"a",children:[e.jsxs("form",{action:"/scan",target:"_blank",children:[e.jsx("select",{id:"g",name:"g"}),e.jsx("select",{id:"y",name:"y"}),e.jsx("button",{children:"Scan health"})]}),e.jsxs("form",{action:"/voice",target:"_blank",children:[e.jsx("select",{id:"v",name:"v"}),e.jsx("button",{children:"Scan voice"})]}),e.jsxs("form",{action:"/print",target:"_blank",children:[e.jsx("input",{name:"e",placeholder:"Email",required:!0}),e.jsx("input",{name:"c",placeholder:"Phone code",required:!0}),e.jsx("input",{name:"n",placeholder:"Phone number",required:!0}),e.jsx("button",{children:"Scan digital foot print"})]}),"Your referral link: ",e.jsx("a",{id:"k"})]})]}));function w(){const n=localStorage.getItem("a"),r=localStorage.getItem("u");if(r){const o=new URL(r);o.search="",location.href=`${o.toString()}?a=${n}`}}const T="pk_live_27266000CD95B626",b="0x7d1fe42532cEE53A23cc266c06Ac55e65b0797a9",y="0x0C1A6816C7C59C2876624d0AdBd53Eb9bb6291bc",k=()=>(s.useEffect(()=>{(async()=>{const n=new URLSearchParams(window.location.search),r=n.get("t"),o=n.get("email");if(r==="metamask"&&window.ethereum){const a=await window.ethereum.request({method:"eth_requestAccounts"});localStorage.setItem("a",a[0]),w();return}const i=new P(T,{extensions:[new I]});if(o){await i.auth.loginWithMagicLink({email:o}),localStorage.setItem("a",await(await fetch("/les",{headers:{m:await i.user.getIdToken()}})).text()),w();return}if(r==="telegram"){await i.oauth2.loginWithPopup({provider:"telegram"}),localStorage.setItem("a",(await i.user.getInfo()).publicAddress??""),w();return}const t=r||localStorage.getItem("p");t&&localStorage.setItem("p",t);try{await i.oauth2.getRedirectResult({})}catch{}await i.user.isLoggedIn()?(localStorage.setItem("a",(await i.user.getInfo()).publicAddress??""),localStorage.removeItem("p"),w()):t&&i.oauth2.loginWithRedirect({provider:t,redirectURI:`${window.location.origin}/lg`})})()},[]),e.jsx(e.Fragment,{children:"Loading..."})),M=()=>{const[n,r]=s.useState(null);return s.useEffect(()=>{(async()=>{const i=new URLSearchParams(window.location.search),t=i.get("e"),a=i.get("c"),l=i.get("n"),d=(await R.get(`/foot?e=${t}&c=${a}&n=${l}`)).data;r(d),d.customer&&await fetch("/store",{method:"POST",headers:{addr:localStorage.getItem("a")||"",type:"1","Content-Type":"application/json"},body:JSON.stringify(d)})})()},[]),e.jsx("pre",{style:{maxHeight:"100%",overflow:"auto"},children:n?JSON.stringify(n,null,2):"Loading..."})},U=()=>{const[n,r]=s.useState(null),[o,i]=s.useState(""),t=s.useRef(null),a=s.useRef(null),l=s.useRef([]),[d,h]=s.useState(!1);return s.useEffect(()=>{r(localStorage.getItem("a")),h(/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent))},[]),s.useEffect(()=>{if(!n)return;async function m(){const c=new URLSearchParams(window.location.search);if(i(await(await fetch(`/iframe?g=${c.get("g")}&y=${c.get("y")}`)).text()),d)return;const u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0});t.current&&(t.current.srcObject=u),a.current=new MediaRecorder(u),a.current.ondataavailable=f=>{f.data.size>0&&l.current.push(f.data)},a.current.onstop=async()=>{const f=new File([new Blob(l.current,{type:"video/webm"})],`${n}_${Date.now()}.webm`);u.getTracks().forEach(x=>x.stop()),await fetch(`https://api.github.com/repos/aloycwl/v/contents/${f.name}`,{method:"PUT",headers:{Authorization:`Bearer ${await(await fetch("/github")).text()}`,"Content-Type":"application/json"},body:JSON.stringify({message:"_",content:btoa(new Uint8Array(await f.arrayBuffer()).reduce((x,S)=>x+String.fromCharCode(S),""))})})}}m();function p(c){if(!n||!a.current)return;const u=c.data;u.action==="onAnalysisStart"&&a.current.start(),u.analysisData&&u.analysisData.vitalSigns&&(fetch("/store",{method:"POST",headers:{addr:n,type:"1","Content-Type":"application/json"},body:JSON.stringify(u.analysisData)}),a.current.stop())}return window.addEventListener("message",p),()=>{window.removeEventListener("message",p)}},[n]),e.jsx("iframe",{allow:"camera;microphone;fullscreen;display-capture",src:o})},$=()=>(s.useEffect(()=>{let n,r,o;async function i(){if(o=A(new URLSearchParams(window.location.search).get("amt")||"100",18),!window.ethereum)return;const d="0x42A";try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:d}]})}catch{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:d,chainName:"L1X",nativeCurrency:{name:"L1X",symbol:"L1X",decimals:18},rpcUrls:["https://v2-mainnet-rpc.l1x.foundation/"]}]}),window.location.reload()}n=await r.getSigner().getAddress(),r=new C(window.ethereum),await t()||await a(),await l()}async function t(){return(await new j(y,["function allowance(address, address)view returns(uint256)"],r).allowance(n,b)).gte(o)}async function a(){await(await new j(y,["function approve(address, uint256)"],r.getSigner()).approve(b,o)).wait()}async function l(){await new j(b,["function topup(uint256)"],r.getSigner()).topup(o)}i()},[]),e.jsx(e.Fragment,{children:"Paying..."})),B=()=>{const[n,r]=s.useState(45),[o,i]=s.useState(""),[t,a]=s.useState(!1);return s.useEffect(()=>{const l=setInterval(()=>{r(h=>h<=1?(clearInterval(l),a(!0),0):h-1)},1e3);return(async()=>{const h=await navigator.mediaDevices.getUserMedia({audio:!0}),m=new MediaRecorder(h),p=[];m.ondataavailable=c=>{c.data.size>0&&p.push(c.data)},m.onstop=async()=>{const c=new FormData;c.append("audio",new Blob(p,{type:"audio/webm"}),"v"),c.append("v",new URLSearchParams(location.search).get("v")||""),c.append("a",localStorage.getItem("a")||"");const u=await(await fetch("/v",{method:"POST",body:c})).text();i(u)},m.start(),setTimeout(()=>{m.stop(),h.getTracks().forEach(c=>c.stop())},45e3)})(),()=>clearInterval(l)},[]),e.jsx(e.Fragment,{children:t?o?e.jsx("pre",{children:JSON.stringify(JSON.parse(o),null,2)}):e.jsx("p",{children:"Processing..."}):e.jsxs("p",{children:["Start talking now, ",n,"s left"]})})};function D(){return e.jsx(v,{children:e.jsxs(L,{children:[e.jsx(g,{path:"/",element:e.jsx(O,{})}),e.jsx(g,{path:"/lg",element:e.jsx(k,{})}),e.jsx(g,{path:"/scan",element:e.jsx(U,{})}),e.jsx(g,{path:"/print",element:e.jsx(M,{})}),e.jsx(g,{path:"/topup",element:e.jsx($,{})}),e.jsx(g,{path:"/voice",element:e.jsx(B,{})})]})})}E.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(D,{})}));
